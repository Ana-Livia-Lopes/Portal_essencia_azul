<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Essência Azul</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans+Arabic:wght@100..900&family=Noto+Serif+Old+Uyghur&display=swap"
        rel="stylesheet">
</head>

<body>
    <component-header />
    <component-acessibilidade />


    <section id="secao1">

        <div class="animated-title">
            <div class="text-top">
                <div>
                    <span class="conteudo-site">Associação</span>
                </div>
            </div>
            <div class="text-bottom">
                <div class="conteudo-site">Essência Azul</div>
            </div>
        </div>

        <p id="sobre" class="conteudo-site">A Essência Azul é uma ONG que apoia pessoas autistas e suas famílias, promovendo inclusão e conscientização.</p>
        <img id="logo" src="/img/logo.png" alt="logo">
    </section>

    <!-- galeria -->
    <!-- <h2>Galeria de Fotos</h2> -->
    <section id="secao2">
        <h2 class="conteudo-site">Galeria de fotos</h2>
        <component-carrossel />
        <component-admin-index_add_imagem />
    </section>

    <!-- cards -->
    <section id="secao3">
        <article class="card">
            <img class="card__background" src="/img/crianca.jpg" width="1920" height="2193" />
            <div class="card__content | flow">
                <div class="card__content--container | flow">
                    <h2 class="card__title conteudo-site">Missão</h2>
                    <p class="card__description">
                        Fornecer suporte emocional e informações relevantes para as famílias
                        de pessoas autistas. Através de orientação
                        especializada, o projeto visa
                        ajudar outras famílias a navegar pelo processo de
                        diagnóstico, tratamento e adaptação, evitando que
                        enfrentem as mesmas dificuldades que Simone e sua
                        família passaram.
                    </p>
                </div>

            </div>
        </article>
        <article class="card">
            <img class="card__background" src="/img/missaoo.png" width="1920" height="2193" />
            <div class="card__content | flow">
                <div class="card__content--container | flow">
                    <h2 class="card__title conteudo-site">Visão</h2>
                    <p class="card__description">
                        Criar uma comunidade, onde famílias que têm
                        pessoas autistas possam encontrar apoio,
                        compreensão e solidariedade. Através desse trabalho,
                        Simone e Carol almejam contribuir para uma sociedade
                        mais inclusiva e consciente das necessidades e
                        potencialidades das pessoas no espectro autista.
                    </p>
                </div>

            </div>
        </article>
        <article class="card">
            <img class="card__background" src="/img/menina.png" width="1920" height="2193" />
            <div class="card__content | flow">
                <div class="card__content--container | flow">
                    <h2 class="card__title conteudo-site">Valores</h2>
                    <p class="card__description">
                        No Essência Azul, guiamos nossas ações pela empatia,
                        pelo respeito e pelo acolhimento. Acreditamos que
                        cada família merece ser ouvida e acompanhada com
                        sensibilidade e dedicação. Valorizamos a colaboração
                        como forma de fortalecer vínculos e construir, juntos,
                        uma rede de apoio sólida e afetiva.
                    </p>
                </div>

            </div>
        </article>
    </section>
    <!-- entenda sobre -->
    <section id="secao4">

        <div class="texto">
            <div class="linha"></div>
            <p id="entenda" class="conteudo-site">Entenda sobre os documentos de identificação</p>
            <a href="/documentos" class="botao conteudo-site">Clique aqui</a>
        </div>
        <div class="imagem">
            <img src="/img/sobreDocumentoss.jpg">
        </div>
    </section>
    <!-- objetivo -->
    <section id="secao5">
        <div id="linhaLateral"></div>
        <p id="t1" class="conteudo-site">1</p>
        <p id="t2" class="conteudo-site">2</p>
        <img class="quadrado obj objmeto" class="conteudo-site" src="/img/retangulo.png">
        <img class="imgQuadrado obj objmeto" src="/img/objetivo.png">
        <p class="titleObjmeto titleObj conteudo-site">Objetivo:</p>
        <p class="textObjmeto textObj conteudo-site">
            O objetivo principal do Essência Azul é oferecer
            suporte e auxílio para famílias que têm crianças ou
            pessoas autistas em suas vidas. A iniciativa visa
            proporcionar um ambiente de acolhimento,
            informação e orientação para pais, mães e familiares
            que estão enfrentando desafios semelhantes aos que
            Simone (fundadora do projeto e mãe de autista) enfrentou.
        </p>
        <img class="quadrado meto objmeto" src="/img/retangulo.png">
        <img class="imgQuadrado meto objmeto" src="/img/metodologia.png">
        <p class="titleObjmeto titleMeto conteudo-site">Suporte oferecido:</p>
        <ol class="textObjmeto textMeto">
            <li class="conteudo-site">1. Orientação e acompanhamento no processo de diagnóstico.</li>
            <li class="conteudo-site">2. Grupos de apoio para compartilhamento de experiências entre familiares.</li>
            <li class="conteudo-site">3. Workshops e palestras informativas sobre autismo e temas relacionados.</li>
            <li class="conteudo-site">4. Aconselhamento emocional para as famílias envolvidas.</li>
            <li class="conteudo-site">5. Divulgação de recursos e serviços disponíveis para pessoas autistas</li>
        </ol>
    </section>
    <!-- ajuda -->
    <section id="secao6">
        <div class="texto2">
            <div class="ajuda"></div>
            <h2 id="tituloAjuda" class="conteudo-site">Precisa de ajuda?</h2>
            <p id="textoAjuda" class="conteudo-site">Responda ao formulário e faça parte dessa causa!</p>
            <a href="/formulario" class="botao2 conteudo-site">Faça parte</a>
        </div>
        <img id="menino" src="/img/menino.png">
    </section>
    <component-json-apoiadores />
    <section id="secao7">
        <img src="/img/linha.png" id="quebraCabeca">
        <div id="apoiadores">
            <div class="button"><span class="arrow"> » » » </span></div>
            <div class="button"><span id="textApoiadores" class="conteudo-site"> Apoiadores </span></div>
            <div class="button"><span class="arrow reverse"> « « « </span></div>
        </div>
        <script>
            if (!window.APOIADORES || window.APOIADORES.length === 0) {
                document.getElementById("apoiadores").remove();
            }
        </script>
        <div class="cardsApoiadores" id="apoiadores-container">
            <!-- <div class="apoiador">
                <div class="header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="title conteudo-site">Nome do Apoiador</div>
                <img src="/img/logo.png" alt="Imagem" class="image">
                <hr class="hr">
            </div>
            <div class="apoiador">
                <div class="header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="title conteudo-site">Nome do Apoiador</div>
                <img src="/img/logo.png" alt="Imagem" class="image">
                <hr class="hr">
            </div>
            <div class="apoiador">
                <div class="header">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <div class="title conteudo-site">Nome do Apoiador</div>
                <img src="/img/logo.png" alt="Imagem" class="image">
                <hr class="hr">
            </div> -->
        </div>
        <component-admin-index_add_apoiadores />
    </section>
    <component-footer />
</body>
<script>
    function criarApoiador(nome, logo, link, id) {
        const apoiador = document.createElement("div");
        apoiador.classList.add("apoiador");
        apoiador.innerHTML = `
            <div class="header">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            <div class="title conteudo-site">${nome}</div>
            <img src="${logo}" alt="Imagem" class="image">
            <hr class="hr">
        `;
        apoiador.querySelector("img").addEventListener("click", () => {
            if (link) {
                window.open(link, "_blank");
            } else {
                Swal.fire({
                    icon: "info",
                    title: "Link não disponível",
                    text: "Este apoiador não possui um link associado.",
                    confirmButtonColor: "#1535B5"
                });
            }
        })
        function modalRemoverApoiador(id) {
            Swal.fire({
                icon: "question",
                title: "Tem certeza que deseja apagar este evento?",
                text: "Esta ação é irreversível",
                showCancelButton: true,
                confirmButtonText: "Apagar",
                confirmButtonColor: "#1535B5",
            }).then(result => {
                if (result.isConfirmed) {
                    fetch(`/api/apoiadores/${id}`, {
                        method: "DELETE"
                    }).then(resp => resp.json()).then(json => {
                        if (json.status === "error") {
                            Swal.fire({
                                icon: "error",
                                title: "Houve um erro...",
                                confirmButtonColor: "#1535B5",
                                text: json.message
                            })
                        } else {
                            Swal.fire({
                                icon: "success",
                                title: "Apoiador excluído com sucesso!",
                                confirmButtonColor: "#1535B5"
                            }).then(() => window.location.reload());
                        }
                    });
                }
            });
        }

        function modalEditarApoiador(id) {

            Swal.fire({
                title: 'Editar apoiador',
                html: `
                 
            <div class="modal-container">
            <label for="nome" class="modal-label">Nome apoiador</label  value="${nome}">
            <input type="text" id="nome" class="modal-input">

            <label for="url" class="modal-label">URL do apoiador</label>
            <input type="url" id="url" class="modal-input" placeholder="https://exemplo.com">

            <label for="arquivoInput" class="modal-label">Imagem</label>
            <input type="file" id="arquivoInput" class="modal-file" accept="image/*">
        </div>
                            `,
                confirmButtonText: 'Salvar alterações',
                confirmButtonColor: "#1535B5",
                cancelButtonText: 'Cancelar',
                showCancelButton: true,
                focusConfirm: false,
                customClass: {
                    popup: 'custom-popup'
                },
                preConfirm: () => {
                    const nome = document.getElementById('nome').value;
                    const url = document.getElementById('url').value;
                    const arquivoInput = document.getElementById('arquivoInput');
                    const arquivo = arquivoInput.files[0];

                    const formdata = new FormData();
                    if (nome) formdata.append('nome', nome);
                    if (url) formdata.append('link', url);
                    if (arquivo) formdata.append('blob', arquivo);

                    return formdata;
                }
            }).then(result => {
                if (result.isConfirmed) {
                    const fd = result.value;
                    fetch(`/api/apoiadores/${id}`, {
                        method: "PATCH",
                        body: fd
                    }).then(resp => resp.json()).then(json => {
                        if (json.status === "error") {
                            Swal.fire({
                                icon: "error",
                                title: "Houve um erro...",
                                confirmButtonColor: "#1535B5",
                                text: json.message,
                            });
                        } else {
                            Swal.fire({
                                icon: "success",
                                title: "Sucesso!",
                                text: "Apoiador atualizado com sucesso!",
                                confirmButtonColor: "#1535B5"
                            }).then(() => window.location.reload());
                        }
                    });
                }
            });
        }


        if (window.ISLOGGED) {
            const removerButton = document.createElement("i");
            removerButton.classList.add("fa-xmark", "fa-solid", "removerButton");
            apoiador.append(removerButton);
            const editarButton = document.createElement("i");
            editarButton.classList.add("fa-pen-to-square", "fa-solid", "editarButton");
            apoiador.append(editarButton);
            removerButton.addEventListener("click", () => {
                modalRemoverApoiador(id)
            });

            editarButton.addEventListener("click", () => {
                modalEditarApoiador(id)
            });
        };
        return apoiador;
    }

    const container = document.getElementById("apoiadores-container");

    if (window.APOIADORES) {
        for (const apoiador of window.APOIADORES) {
            container.appendChild(criarApoiador(apoiador.nome, apoiador.logo, apoiador.link, apoiador.id))
        }
    }

    function adicionarApoiador() {
        Swal.fire({
            title: 'Adicionar imagem',
            html: `
        <div class="modal-container">
            <label for="nome" class="modal-label">Nome apoiador</label>
            <input type="text" id="nome" class="modal-input">

            <label for="url" class="modal-label">URL do apoiador</label>
            <input type="url" id="url" class="modal-input" placeholder="https://exemplo.com" >

            <label for="arquivoInput" class="modal-label">Imagem</label>
            <input type="file" id="arquivoInput" class="modal-file" accept="image/*">
        </div>
    `,
            confirmButtonText: 'Salvar',
            cancelButtonText: 'Cancelar',
            confirmButtonColor: "#1535B5",
            showCancelButton: true,
            focusConfirm: false,
            customClass: {
                popup: 'custom-popup'
            },

            preConfirm: () => {
                const nome = document.getElementById('nome').value;
                const url = document.getElementById('url').value;
                const arquivoInput = document.getElementById('arquivoInput');
                const arquivo = arquivoInput.files[0];

                if (!nome || !url || !arquivo) {
                    Swal.showValidationMessage('Por favor, preencha todos os campos e selecione uma imagem.');
                    return false;
                }

                const formdata = new FormData();
                formdata.append('nome', nome);
                formdata.append('link', url);
                formdata.append('blob', arquivo);

                return formdata;

            }

        }).then(result => {
            if (result.isConfirmed) {
                const formdata = result.value;
                fetch("/api/apoiadores", {
                    method: "POST",
                    body: formdata
                }).then(resp => resp.json()).then(json => {
                    if (json.status === "error") {
                        Swal.fire({
                            icon: "error",
                            title: "Houve um erro...",
                            confirmButtonColor: "#1535B5",
                            message: json.message
                        });
                    } else {
                        Swal.fire({
                            icon: "success",
                            title: "Apoiador adicionado com sucesso!",
                            confirmButtonColor: "#1535B5"
                        }).then(() => {
                            window.location.reload();
                        });
                    }
                })
            }
        });
    }
</script>















</script>

</html>