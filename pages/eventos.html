<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eventos - Portal Essência Azul</title>
    <link rel="stylesheet" href="/css/eventos.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans+Arabic:wght@100..900&family=Noto+Serif+Old+Uyghur&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="shortcut icon" href="/img/logo.png" type="image/x-icon">
</head>

<body>
    <component-header/>
    <component-acessibilidade/>

    <component-json-eventos />

    <section id="secao1">
        <h1 class="conteudo-site">Eventos</h1>

        <div class="eventos">
            <div class="lista-eventos" id="listaEventos">
            </div>
            <div id="imgEventoContainer">
                <!-- <img class="imgEvento" id="imgEvento" src="/img/evento1.png" alt=""> -->
                <div id="semEventoDiv">
                    <div style="height: 100%; display: flex; justify-content: center; align-items: center;">
                        <h1 style="vertical-align: middle; margin: 0;">
                            Nenhum evento...
                        </h1>
                    </div>
                </div>
            </div>
            <script>
                const imagemOutput = document.getElementById("imgEventoContainer");
                const meses = [
                    "Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho",
                    "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
                ];

                let eventoAtual = 0;

                function createEvento(nome, descricao, data, url, index) {
                    data = new Date(data);
                    const imgInstance = document.createElement("img");
                    imgInstance.src = url;

                    const eventoDiv = document.createElement("div");
                    eventoDiv.classList.add("item-evento");
                    eventoDiv.imgInstance = imgInstance;

                    const dataDiv = document.createElement("div");
                    dataDiv.classList.add("data");
                    const dataDivBold = document.createElement("b");
                    dataDivBold.classList.add("conteudo-site");
                    dataDivBold.innerHTML = data.getDate();
                    const dataDivBr = document.createElement("br");
                    const dataSubDiv = document.createElement("div")
                    dataSubDiv.append(dataDivBold, dataDivBr, meses[data.getMonth()]);
                    dataDiv.append(dataSubDiv);

                    const conteudoDiv = document.createElement("div");
                    conteudoDiv.classList.add("conteudo");
                    const conteudoDivStrong = document.createElement("strong");
                    conteudoDivStrong.classList.add("conteudo-site");
                    conteudoDivStrong.innerHTML = nome;
                    const conteudoDivDescricao = document.createElement("div");
                    conteudoDivDescricao.classList.add("conteudo-site");
                    conteudoDivDescricao.innerHTML = descricao;
                    conteudoDiv.append(conteudoDivStrong, conteudoDivDescricao);

                    eventoDiv.append(dataDiv, conteudoDiv);

                    eventoDiv.addEventListener("click", () => {
                        for (const child of imagemOutput.children) {
                            child.remove();
                        }
                        imagemOutput.appendChild(imgInstance);
                        eventoAtual = index;
                    });

                    eventoDiv.index = index;

                    return eventoDiv;
                }

                const listaEventos = document.getElementById("listaEventos");

                if (window.EVENTOS.length !== 0) {
                    const semEventoDiv = document.getElementById("semEventoDiv");
                    if (semEventoDiv) semEventoDiv.remove();
                }

                for (let i = 0; i < window.EVENTOS.length; i++) {
                    const { titulo, descricao, data, imagem } = window.EVENTOS[i];
                    const eventoDiv = createEvento(titulo, descricao, data, imagem, i);
                    listaEventos.appendChild(eventoDiv);
                    if (i === 0) eventoDiv.dispatchEvent(new Event("click"));
                }
            </script>
        </div>
    </section>
    
    <section id="secao2">
        <component-admin-eventos_add_evento />
        
        <img src="/img/linha.png" id="quebraCabeca">
        <h2 class="h2 conteudo-site">Eventos anteriores</h2>
        
        <component-carrossel/>
        <component-admin-index_add_imagem />
        
    </section>

    <component-footer/>
</body>

</html>