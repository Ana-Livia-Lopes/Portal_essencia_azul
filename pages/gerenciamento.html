<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/gerenciamento.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Gerenciamento - Portal Essência Azul</title>
</head>

<body>
    <component name="header" />

    <h1 id="titulo1" class="conteudo-site">Gerenciamento</h1>

    <div class="estatisticas">

        <div class="navegacao-lateral">
            <div class="links-pg-div">
                <div id="agrupamento-links">
                    <h3><a href="/cadastrar_adm"><i id="icon-link" class="fas fa-plus conteudo-site"></i> Cadastrar
                            administrador</a></h3>
                    <h3><a href="/cadastrar_acolhido"><i id="icon-link" class="fas fa-plus conteudo-site"></i> Cadastrar
                            acolhido</a></h3>
                    <h3><a href="/solic_receb"><i class="fas fa-user conteudo-site"></i> Solicitações de cadastro</a>
                    </h3>
                </div>
            </div>

            <div id="atalhos">
                <h2>Usuários</h2>
                <div id="botoes-direita">
                    <button class="botao conteudo-site" onclick="scrollParaElemento('secao4')"
                        id="option-switch-voluntarios">Voluntários</button>
                    <button class="botao conteudo-site" onclick="scrollParaElemento('secao2')"
                        id="option-switch-administradores">Administradores</button>
                    <button class="botao conteudo-site" onclick="scrollParaElemento('secao3')"
                        id="option-switch-familias">Famílias</button>
                    <button class="botao conteudo-site" onclick="scrollParaElemento('secao1')"
                        id="option-switch-acolhidos">Acolhidos</button>
                    <button class="botao-esp" onclick="irParaRelatorios()"
                        id="option-switch-relatorios">Relatórios</button>
                </div>
            </div>
        </div>

        <div class="graficos">
            <div id="div-grafico-meses">
                <canvas id="graficoMeses" width="200" height="200"></canvas>
            </div>
            <div id="div-grafico-familias">
                <canvas id="graficoDonut" width="200" height="200"></canvas>
            </div>
        </div>

        <div class="grupo-estatisticas-acolhidos">
            <div class="estatisticas-acolhidos">
                <div class="titulo">Possui carteirinha de identificação</div>
                <div class="numero" id="num1"></div>
                <div class="progress-container">
                    <div class="progress-bar bar1" id="bar1"></div>
                </div>
            </div>

            <div class="estatisticas-acolhidos">
                <div class="titulo">Possui cordão de girassol ou quebra-cabeça</div>
                <div class="numero" id="num2"></div>
                <div class="progress-container">
                    <div class="progress-bar bar2 animated" id="bar2"></div>
                </div>
            </div>

            <div class="estatisticas-acolhidos">
                <div class="titulo">Possui cartão de vaga de estacionamento</div>
                <div class="numero" id="num3"></div>
                <div class="progress-container">
                    <div class="progress-bar bar3" id="bar3"></div>
                </div>
            </div>

            <div class="estatisticas-acolhidos">
                <div class="titulo">Possui apoio escolar (criança)</div>
                <div class="numero" id="num4"></div>
                <div class="progress-container">
                    <div class="progress-bar bar4" id="bar4"></div>
                </div>
            </div>
        </div>

    </div>

    <script type="module">
        import ComponentSwitch from "/js/component_switch.js";

        new ComponentSwitch(document.getElementById("option-switch"), { ignoreCache: true })
            .setChangeButton(document.getElementById("option-switch-voluntarios"), "gerenciamento-voluntarios")
            .setChangeButton(document.getElementById("option-switch-administradores"), "gerenciamento-administradores")
            .setChangeButton(document.getElementById("option-switch-familias"), "gerenciamento-familias")
            // .setChangeButton(document.getElementById("option-switch-relatorios"), "gerenciamento-relatorios")
            .setChangeButton(document.getElementById("option-switch-acolhidos"), "gerenciamento-acolhidos")

    </script>

    <!-- Gráficos -->
    <script>
        const ctxBar = document.getElementById('graficoMeses').getContext('2d');
        const grafico = new Chart(ctxBar, {
            type: 'bar',
            data: {
                labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho'],
                datasets: [{
                    label: 'Acessos por mês',
                    data: [120, 150, 180, 90, 200, 170],
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Acessos mensais do site'
                    },
                    legend: {
                        position: 'bottom'
                    },
                },
                scales: {
                    y: {
                        beginAtZero: true // Começa do zero
                    }
                }
            }
        });

        const ctxDonut = document.getElementById('graficoDonut').getContext('2d');
        const graficoDonut = new Chart(ctxDonut, {
            type: 'doughnut',
            data: {
                labels: ['Neurotípico', 'Autista', 'Em investigação'],
                datasets: [{
                    data: [53, 35, 12],
                    backgroundColor: [
                        '#1535B5',
                        '#fff550',
                        '#70b0db'
                    ],
                }]
            },
            options: {
                responsive: true,
                cutout: '60%', // controla o "furo" do donut
                plugins: {
                    title: {
                        display: true,
                        text: 'Perfil neurológico das famílias acolhidas'
                    },
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                let label = context.label || '';
                                let value = context.raw || 0;
                                return `${label}: ${value} pessoas`;
                            }
                        }
                    }
                }
            }
        });
    </script>

    <script>
        const dados = [
            { id: 1, sim: 75 },
            { id: 2, sim: 40 },
            { id: 3, sim: 60 },
            { id: 4, sim: 30 },
        ];

        dados.forEach((item) => {
            document.getElementById(`num${item.id}`).textContent = `${item.sim} de 100 acolhidos`;
            document.getElementById(`bar${item.id}`).style.width = `${item.sim}%`;
        });
    </script>

    <div id="option-switch">
        <section class="section-nhm-opcao-selec">
            <img src="/img/nhm-opcao-selec.png" alt="Ilustração de nenhuma opção de usuário selecionada.">
            <p class="conteudo-site">Nenhuma opção selecionada.</p>
        </section>
    </div>

    <!-- <section class="section-acolhidos" id="secao1">
        <div class="lista-info-usuario">
            <input type="text" id="search" placeholder="Pesquise..." class="conteudo-site" />
            <span class="search-icon"><i class="fa-solid fa-magnifying-glass" class="conteudo-site"></i></span>
            <div class="user-opcao-lista" id="usuariosLista">
                <div class="opcao-lista conteudo-site"> Lucas</div>
                <div class="opcao-lista conteudo-site"> Acolhido 2</div>
                <div class="opcao-lista conteudo-site"> Acolhido 3</div>
                <div class="opcao-lista conteudo-site"> Acolhido 4</div>
                <div class="opcao-lista conteudo-site"> Acolhido 5</div>
                <div class="opcao-lista conteudo-site"> Acolhido 6</div>
                <div class="opcao-lista conteudo-site"> Acolhido 7</div>
                <div class="opcao-lista conteudo-site"> Acolhido 8</div>
                <div class="opcao-lista conteudo-site"> Acolhido 9</div>
                <div class="opcao-lista conteudo-site"> Acolhido 10</div>
                <div class="opcao-lista conteudo-site"> Acolhido 11</div>
                <div class="opcao-lista conteudo-site"> Acolhido 12</div>
                <div class="opcao-lista conteudo-site"> Acolhido 13</div>
                <div class="opcao-lista conteudo-site"> Acolhido 14</div>
                <div class="opcao-lista conteudo-site"> Acolhido 15</div>
                <div class="opcao-lista conteudo-site"> Acolhido 16</div>
            </div>
        </div>

        <div class="form-container">
            <div class="form-cabecalho">
                <img class="user-foto" src="/img/user-default.png" alt="Foto do acolhido">
                <h2 class="conteudo-site">Lucas</h2>
            </div>

            <form>
                <div class="form-grid">
                    <div class="label-input conteudo-site"><label>Nome:</label><input type="text"></div>
                    <div class="label-input conteudo-site"><label>Áreas de Interesse:</label><input type="text"></div>

                    <div class="label-input conteudo-site"><label>Telefone:</label><input type="text"></div>
                    <div class="label-input conteudo-site"><label>Hiperfoco:</label><input type="text"></div>

                    <div class="label-input conteudo-site"><label>E-mail:</label><input type="email"></div>
                    <div class="label-input conteudo-site"><label>Como o autista se acalma?</label><input type="text">
                    </div>

                    <div class="label-input conteudo-site"><label>Idade:</label><input type="text"></div>
                    <div class="label-input conteudo-site"><label>Atividades que o autista NÃO gosta:</label><input
                            type="text"></div>

                    <div class="label-input conteudo-site"><label>Família:</label><input type="text"></div>
                    <div class="label-input conteudo-site"><label>Restrições Alimentares:</label><input type="text">
                    </div>

                    <div class="label-input conteudo-site">
                        <label class="conteudo-site">Nível de suporte:</label>
                        <select id="nivel-suporte">
                            <option value="" class="conteudo-site">Selecione...</option>
                            <option value="1" class="conteudo-site">Nível 1</option>
                            <option value="2" class="conteudo-site">Nível 2</option>
                            <option value="3" class="conteudo-site">Nível 3</option>
                        </select>
                    </div>
                    <div class="label-input conteudo-site"><label>Comida favorita:</label><input type="text"></div>

                    <div class="label-input conteudo-site"><label>Escola:</label><input type="text"></div>
                    <div class="label-input conteudo-site"><label>Convênio ou SUS: Qual convênio?</label><input
                            type="text"></div>

                    <div class="label-input conteudo-site"><label>Nome dos responsáveis:</label><input type="text">
                    </div>
                    <div class="label-input conteudo-site"><label>Faz terapia?</label><input type="text"></div>

                    <div class="label-input conteudo-site">
                        <label class="conteudo-site">Suporte na escola:</label>
                        <div class="radio">
                            <input class="conteudo-site" type="radio" id="escola-suporte-sim" name="escola-suporte"
                                value="Sim">
                            <label for="escola-suporte-sim" class="conteudo-site">Sim</label>

                            <input class="conteudo-site" type="radio" id="escola-suporte-nao" name="escola-suporte"
                                value="Não">
                            <label for="escola-suporte-nao" class="conteudo-site">Não</label>
                        </div>
                    </div>
                    <div class="label-input conteudo-site">
                        <label class="conteudo-site">Qual terapia precisa e não faz?</label>
                        <input type="text" class="conteudo-site">
                    </div>

                    <div class="label-input conteudo-site">
                        <label class="conteudo-site">CIPTEA:</label>
                        <div class="radio">
                            <input class="conteudo-site" type="radio" id="ciptea-sim" name="ciptea" value="Sim">
                            <label for="ciptea-sim" class="conteudo-site">Sim</label>

                            <input class="conteudo-site" type="radio" id="ciptea-nao" name="ciptea" value="Não">
                            <label for="ciptea-nao" class="conteudo-site">Não</label>
                        </div>
                    </div>
                    <div class="label-input conteudo-site">
                        <label class="conteudo-site">Observações:</label>
                        <textarea class="conteudo-site"></textarea>
                    </div>

                    <div class="label-input conteudo-site">
                        <label class="conteudo-site">Cordão de Identificação:</label>
                        <div class="radio">
                            <input class="conteudo-site" type="radio" id="cordao-sim" name="cordao" value="Sim">
                            <label class="conteudo-site" for="cordao-sim">Sim</label>

                            <input class="conteudo-site" type="radio" id="cordao-nao" name="cordao" value="Não">
                            <label class="conteudo-site" for="cordao-nao">Não</label>
                        </div>
                    </div>

                    <div class="label-input conteudo-site">
                        <label class="conteudo-site">Cartão Defis:</label>
                        <div class="radio">
                            <input class="conteudo-site" type="radio" id="defis-sim" name="defis" value="Sim">
                            <label class="conteudo-site" for="defis-sim">Sim</label>

                            <input class="conteudo-site" type="radio" id="defis-nao" name="defis" value="Não">
                            <label class="conteudo-site" for="defis-nao">Não</label>
                        </div>
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="button" class="edit-btn conteudo-site">Editar</button>
                    <button type="button" class="delete-btn conteudo-site">Excluir</button>
                </div>

                <div class="upload-section">
                    <label class="conteudo-site">Adicionar documento:</label>
                    <input type="file" class="conteudo-site">
                    <button type="submit" class="submit-btn conteudo-site">Enviar</button>
                </div>
            </form>
        </div>
    </section> -->

    <!-- <section class="section-admin" id="secao2">
        <div class="lista-info-usuario">
            <span class="span-selecione conteudo-site">Selecione:</span>
            <div class="user-opcao-lista" id="usuariosLista">
                <div class="opcao-lista conteudo-site"> Simone</div>
                <div class="opcao-lista conteudo-site"> Carol</div>
                <div class="opcao-lista conteudo-site"> Sol</div>
            </div>
        </div>

        <div class="form-container">
            <div class="form-cabecalho">
                <img class="user-foto" src="/img/user-default.png" alt="Foto do admin">
                <h2 class="conteudo-site">Simone</h2>
            </div>

            <form>
                <div class="form-grid">
                    <div class="label-input conteudo-site">
                        <label>Nome:</label>
                        <input type="text">
                    </div>

                    <div class="label-input conteudo-site">
                        <label>Senha:</label>
                        <input type="text">
                    </div>

                    <div class="label-input conteudo-site">
                        <label>E-mail:</label>
                        <input type="email">
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="button" class="edit-btn conteudo-site">Editar</button>
                    <button type="button" class="delete-btn conteudo-site">Excluir</button>
                </div>
            </form>
        </div>
    </section> -->

    <!-- <section class="section-familias" id="secao3">
        <div class="lista-info-usuario">
            <span class="span-selecione conteudo-site">Selecione:</span>
            <div class="acolhido-opcao-lista" id="usuariosLista">
                <div class="opcao-lista conteudo-site">Família SmartWeb</div>
                <div class="opcao-lista conteudo-site">Família 2</div>
                <div class="opcao-lista conteudo-site">Família 3</div>
                <div class="opcao-lista conteudo-site">Família 4</div>
                <div class="opcao-lista conteudo-site">Família 5</div>
            </div>
        </div>

        <div class="form-container">
            <div class="form-cabecalho">
                <h2 class="conteudo-site">Família SmartWeb</h2>
            </div>

            <h3 class="subtitulo-familias conteudo-site">Acolhidos da família:</h3>
            <div class="users-familia">
                <div class="acolhido-card">
                    <img src="/img/user-default.png" class="img-user-default" alt="">
                    <p class="conteudo-site">Lucas</p>
                </div>
                <div class="acolhido-card">
                    <img src="/img/user-default.png" class="img-user-default" alt="">
                    <p class="conteudo-site">Acolhido 2</p>
                </div>
                <div class="acolhido-card">
                    <img src="/img/user-default.png" class="img-user-default" alt="">
                    <p class="conteudo-site">Acolhido 3</p>
                </div>
                <div class="acolhido-card">
                    <img src="/img/user-default.png" class="img-user-default" alt="">
                    <p class="conteudo-site">Acolhido 4</p>
                </div>
            </div>

            <h3 class="subtitulo-familias conteudo-site">Residentes (outros):</h3>
            <div class="residente-linha">
                <div class="residente-info">
                    <div class="foto-nomeResidente">
                        <img src="/img/user-default.png" class="img-user-default" alt="">
                        <span class="conteudo-site">Residente 5</span>
                    </div>
                    <select>
                        <option class="conteudo-site">Selecione...</option>
                        <option class="conteudo-site">Sim</option>
                        <option class="conteudo-site">Não</option>
                        <option class="conteudo-site">Em investigação</option>
                        <option class="conteudo-site">Neurotípico</option>
                    </select>
                    <div class="botoes-acoes">
                        <button class="btn-editar conteudo-site">Editar</button>
                        <button class="btn-excluir conteudo-site">Excluir</button>
                    </div>
                </div>
            </div>
            <div class="residente-linha">
                <div class="residente-info">
                    <div class="foto-nomeResidente">
                        <img src="/img/user-default.png" class="img-user-default" alt="">
                        <span class="conteudo-site">Residente 6</span>
                    </div>
                    <select>
                        <option class="conteudo-site">Selecione...</option>
                        <option class="conteudo-site">Sim</option>
                        <option class="conteudo-site">Não</option>
                        <option class="conteudo-site">Em investigação</option>
                        <option class="conteudo-site">Neurotípico</option>
                    </select>
                    <div class="botoes-acoes">
                        <button class="btn-editar conteudo-site">Editar</button>
                        <button class="btn-excluir conteudo-site">Excluir</button>
                    </div>
                </div>
            </div>

            <div class="div-btn-adicionar">
                <button class="btn-adicionar conteudo-site">Adicionar residente</button>
            </div>

            <h3 class="mais-informacoes conteudo-site">Mais informações:</h3>
            <div class="label-input2 conteudo-site">
                <label>Endereço:</label>
                <input type="text" />
            </div>

            <div class="mais-infomracoes-desc">
                <p class="conteudo-site">Não acolhidos: <strong>2</strong></p>
                <p class="conteudo-site">Residentes em investigação: <strong>1</strong></p>
                <p class="conteudo-site">Residentes com laudo: <strong>3</strong></p>
            </div>
        </div>
    </section> -->

    <!-- <section class="section-voluntarios" id="secao4">
        <div class="lista-info-usuario">
            <span class="span-selecione conteudo-site">Selecione:</span>
            <div class="user-opcao-lista" id="usuariosLista">
                <div class="opcao-lista conteudo-site"> Voluntário 1</div>
                <div class="opcao-lista conteudo-site"> Voluntário 2</div>
                <div class="opcao-lista conteudo-site"> Voluntário 3</div>
                <div class="opcao-lista conteudo-site"> Voluntário 4</div>
                <div class="opcao-lista conteudo-site"> Voluntário 5</div>
            </div>
        </div>

        <div class="form-container">
            <div class="form-cabecalho">
                <h2 class="conteudo-site">Voluntário</h2>
            </div>

            <form>
                <div class="form-grid">
                    <div class="label-input conteudo-site">
                        <label>Nome completo:</label>
                        <input type="text">
                    </div>

                    <div class="label-input conteudo-site">
                        <label>CPF:</label>
                        <input type="text">
                    </div>

                    <div class="label-input conteudo-site">
                        <label>E-mail:</label>
                        <input type="email">
                    </div>

                    <div class="label-input conteudo-site">
                        <label>Telefone:</label>
                        <input type="email">
                    </div>

                    <div class="label-input conteudo-site">
                        <label>Como quer ajudar:</label>
                        <input type="email">
                    </div>

                    <div class="label-input conteudo-site">
                        <label>Outro tipo de ajuda:</label>
                        <input type="email">
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="button" class="edit-btn conteudo-site">Aceitar</button>
                    <button type="button" class="delete-btn conteudo-site">Recusar</button>
                </div>
            </form>
        </div>
    </section> -->

    <component name="footer" />

    <a href="#" class="btn" id="scrollToTopButton"></a>

    <script>
        function scrollParaElemento(id) {
            var delayMilisegundos = 50;
            setTimeout(function() {

                const alvo = document.getElementById(id);
                if (!alvo) return;
    
                const distancia = alvo.getBoundingClientRect().top + window.scrollY;
                const duracao = 800;
                const inicio = window.scrollY;
                const comeco = performance.now();
    
                function animarScroll(agora) {
                    const tempoPassado = agora - comeco;
                    const progresso = Math.min(tempoPassado / duracao, 1);
                    const ease = 0.5 - Math.cos(progresso * Math.PI) / 2;
    
                    window.scrollTo(0, inicio + (distancia - inicio) * ease);
    
                    if (progresso < 1) {
                        requestAnimationFrame(animarScroll);
                    }
                }
    
                requestAnimationFrame(animarScroll);
            }, delayMilisegundos);
        }

        const scrollToTopButton = document.getElementById('scrollToTopButton');

        function smoothScrollToTop() {
            const scrollStep = -window.scrollY / 40;
            const scrollInterval = setInterval(() => {
                if (window.scrollY !== 0) {
                    window.scrollBy(0, scrollStep);
                } else {
                    clearInterval(scrollInterval);
                }
            }, 15);
        }

        scrollToTopButton.addEventListener('click', (event) => {
            event.preventDefault();
            smoothScrollToTop();
        });

        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                scrollToTopButton.classList.add('show');
            } else {
                scrollToTopButton.classList.remove('show');
            }
        });

        function irParaRelatorios() {
            window.location.href = "relatorios ";
        }

    </script>
</body>

</html>